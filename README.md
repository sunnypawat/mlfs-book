# Air Quality Forecasting Service

This project implements an end-to-end air quality prediction system based on the Hopsworks Feature Store. It follows the structure of the MLFS book repository but introduces several extensions, most importantly the addition of lagged air-quality features for model improvement. The system collects weather and air-quality data, builds feature groups, trains an XGBoost model, and publishes daily forecasts through a dashboard.

## Overview

Historical weather data and historical air-quality measurements are ingested into Hopsworks as two separate feature groups. A daily pipeline updates these feature groups with the latest observations and the upcoming 7–10 day weather forecast. A training pipeline constructs a feature view, loads data directly from the Feature Store, trains an XGBoost regression model to predict PM2.5, and registers the model in Hopsworks. A batch inference pipeline reads the latest features, loads the stored model, generates forecasts, produces hindcast plots comparing predictions and actual outcomes, and publishes the dashboard.

## Lagged Feature Extension

To improve the model beyond the baseline in the reference implementation, this project adds new features representing the previous 1-day, 2-day, and 3-day PM2.5 values. These lagged features are computed inside the feature engineering step prior to insertion into the air-quality feature group. The training pipeline is adapted to include these new columns in the feature view.

Experiments show that incorporating lagged features improves the temporal consistency of predictions and reduces short-term forecast error. The model captures local trends more effectively, particularly during periods of rapid change in PM2.5 levels. In some cases, a slight increase in variance is observed for longer-range forecasts, but overall performance improves for 1- to 3-day predictions, and the hindcast plots confirm a tighter alignment between predicted and measured values.

## Differences from the Reference Repository

The implementation follows the logic of the original notebooks in the mlfs-book repository but extends them in several ways. The air-quality feature pipeline includes computation of lagged PM2.5 values before insertion into Hopsworks. The training notebook modifies the feature view to include these new features and provides updated evaluation metrics. The batch inference pipeline is extended to generate hindcast graphs, which are required for monitoring prediction accuracy. The repository also includes updated GitHub Actions workflows to run both the daily feature pipeline and the batch inference pipeline automatically.

## Dashboard

The project includes a public dashboard generated by the batch inference pipeline. It visualizes the predicted PM2.5 levels for the next 7–10 days for the selected sensor and includes a hindcast section showing historical predictions compared to actual measurements.

Dashboard URL: https://sunnypawat.github.io/mlfs-book/air-quality/

## Repository Structure

The repository contains the feature backfill notebook, the scheduled daily feature pipeline, the training pipeline, and the batch inference pipeline. All environment variables are provided through a .env file and GitHub Secrets. The workflows run automatically once per day and regenerate the dashboard.
